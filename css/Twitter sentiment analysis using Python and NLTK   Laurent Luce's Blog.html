<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0082)http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/ -->
<html xmlns="http://www.w3.org/1999/xhtml" class=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>  Twitter sentiment analysis using Python and NLTK | Laurent Luce's Blog</title>
<meta name="description" content="  Twitter sentiment analysis using Python and NLTK">
<meta name="keywords" content="  Twitter sentiment analysis using Python and NLTK">
<link rel="stylesheet" type="text/css" href="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/style.css" media="screen">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.laurentluce.com/feed/">
<link rel="pingback" href="http://www.laurentluce.com/xmlrpc.php">

			<script type="text/javascript" async="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/ga.js"></script><script type="text/javascript">//<![CDATA[
			// Google Analytics for WordPress by Yoast v4.2.8 | http://yoast.com/wordpress/google-analytics/
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-12599046-1']);
							_gaq.push(['_trackPageview']);
			(function () {
				var ga = document.createElement('script');
				ga.type = 'text/javascript';
				ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(ga, s);
			})();
			//]]></script><style type="text/css"></style>
			<link rel="alternate" type="application/rss+xml" title="Laurent Luce&#39;s Blog » Twitter sentiment analysis using Python and NLTK Comments Feed" href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/feed/">
<script type="text/javascript" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/jquery.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.laurentluce.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.laurentluce.com/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="Python string objects implementation" href="http://www.laurentluce.com/posts/python-string-objects-implementation/">
<link rel="next" title="Python, Twitter statistics and the 2012 French presidential election" href="http://www.laurentluce.com/posts/python-twitter-statistics-and-the-2012-french-presidential-election/">
<meta name="generator" content="WordPress 3.4.2">
<link rel="canonical" href="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog.html">
<link rel="shortlink" href="http://www.laurentluce.com/?p=321">
<link rel="stylesheet" type="text/css" href="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/shCore.css"><link rel="stylesheet" type="text/css" href="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/shThemeEclipse.css"><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.3">
<script type="text/javascript" src="chrome-extension://bfbmjmiodbnnpllbbbfblcplfjjepjdn/js/injected.js"></script></head>

<body class="">
<div align="center">
<div id="wrapper">
<div id="doc1" class="yui-t4">
<div id="hd">
	<div id="sitemeta">
		<ul>
     			     			<li><a href="http://www.laurentluce.com/wp-login.php">Log in</a></li>
     			     			<li class="rss"><a href="http://www.laurentluce.com/feed/">Subscribe RSS Feed</a></li>
  		</ul>
	</div>
	<div id="titlewrapper">
		<div id="blogtitle">
			<h1><a href="http://www.laurentluce.com/">Laurent Luce's Blog</a></h1>
		</div>
		<div id="menu">
			<ul>
				<li><div id="blogdescription">Technical blog on web technologies</div></li>
				<li><a href="http://www.laurentluce.com/">Home</a></li>
				<li class="page_item page-item-2"><a href="http://www.laurentluce.com/about/">About</a></li>
			</ul>
		</div>
	</div>
	<div id="newsflash">
                
	</div>
	<div class="clear">&nbsp;</div>
</div>

<div id="sidebar" class="yui-b">
<ul class="sidebar">
		<li id="recent-posts-4" class="widget widget_recent_entries">		<h2 class="widgettitle">Recent Posts</h2>
		<ul>
				<li><a href="http://www.laurentluce.com/posts/python-twitter-statistics-and-the-2012-french-presidential-election/" title="Python, Twitter statistics and the 2012 French presidential election">Python, Twitter statistics and the 2012 French presidential election</a></li>
				<li><a href="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog.html" title="Twitter sentiment analysis using Python and NLTK">Twitter sentiment analysis using Python and NLTK</a></li>
				<li><a href="http://www.laurentluce.com/posts/python-string-objects-implementation/" title="Python string objects implementation">Python string objects implementation</a></li>
				<li><a href="http://www.laurentluce.com/posts/python-integer-objects-implementation/" title="Python integer objects implementation">Python integer objects implementation</a></li>
				<li><a href="http://www.laurentluce.com/posts/python-and-cryptography-with-pycrypto/" title="Python and cryptography with pycrypto">Python and cryptography with pycrypto</a></li>
				<li><a href="http://www.laurentluce.com/posts/python-list-implementation/" title="Python list implementation">Python list implementation</a></li>
				<li><a href="http://www.laurentluce.com/posts/solving-mazes-using-python-simple-recursivity-and-a-search/" title="Solving mazes using Python: Simple recursivity and A* search">Solving mazes using Python: Simple recursivity and A* search</a></li>
				<li><a href="http://www.laurentluce.com/posts/python-dictionary-implementation/" title="Python dictionary implementation">Python dictionary implementation</a></li>
				<li><a href="http://www.laurentluce.com/posts/python-threads-synchronization-locks-rlocks-semaphores-conditions-events-and-queues/" title="Python threads synchronization: Locks, RLocks, Semaphores, Conditions, Events and Queues">Python threads synchronization: Locks, RLocks, Semaphores, Conditions, Events and Queues</a></li>
				<li><a href="http://www.laurentluce.com/posts/openstack-nova-internals-of-instance-launching/" title="OpenStack Nova internals of instance launching">OpenStack Nova internals of instance launching</a></li>
				</ul>
		</li>
<li id="search-3" class="widget widget_search"><h2 class="widgettitle">Search</h2>
<form method="get" id="searchform" action="http://www.laurentluce.com/">
<input type="text" size="14" value="" name="s" id="s" class="s">
<input type="submit" id="searchsubmit" value="GO">
</form></li>
<li id="meta-3" class="widget widget_meta"><h2 class="widgettitle">Meta</h2>
			<ul>
						<li><a href="http://www.laurentluce.com/wp-login.php">Log in</a></li>
			<li><a href="http://www.laurentluce.com/feed/" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://www.laurentluce.com/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>
						</ul>
</li>
</ul>
</div>

<div id="bd" class="single">
<div id="yui-main"><div class="yui-b">
	<div class="post-wrap" id="post">
		<h1 class="post-title"><a href="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog.html" rel="bookmark" title="Permanent Link to Twitter sentiment analysis using Python and NLTK">Twitter sentiment analysis using Python and NLTK</a></h1>
	                <div>January 2, 2012</div> 
			<div class="story-content">
			<p>This post describes the implementation of sentiment analysis of tweets using Python and the natural language toolkit <a href="http://www.nltk.org/">NLTK</a>. The post also describes the internals of NLTK related to this implementation.</p>
<h2>Background</h2>
<p>The purpose of the implementation is to be able to automatically classify a tweet as a positive or negative tweet sentiment wise.</p>
<p>The classifier needs to be trained and to do that, we need a list of manually classified tweets. Let’s start with 5 positive tweets and 5 negative tweets.</p>
<p>Positive tweets:</p>
<ul>
<li>I love this car.</li>
<li>This view is amazing.</li>
<li>I feel great this morning.</li>
<li>I am so excited about the concert.</li>
<li>He is my best friend.</li>
</ul>
<p>Negative tweets:</p>
<ul>
<li>I do not like this car.</li>
<li>This view is horrible.</li>
<li>I feel tired this morning.</li>
<li>I am not looking forward to the concert.</li>
<li>He is my enemy.</li>
</ul>
<p>In the full implementation, I use about 600 positive tweets and 600 negative tweets to train the classifier. I store those tweets in a Redis DB. Even with those numbers, it is quite a small sample and you should use a much larger set if you want good results.</p>
<p>Next is a test set so we can assess the exactitude of the trained classifier.</p>
<p>Test tweets:</p>
<ul>
<li>I feel happy this morning. positive.</li>
<li>Larry is my friend. positive.</li>
<li>I do not like that man. negative.</li>
<li>My house is not great. negative.</li>
<li>Your song is annoying. negative.</li>
</ul>
<h2>Implementation</h2>
<p>The following list contains the positive tweets:</p>
<div id="highlighter_63773" class="syntaxhighlighter  "><div class="bar                                                                         "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_63773_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_63773" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">pos_tweets </code><code class="keyword">=</code> <code class="plain">[(</code><code class="string">'I love this car'</code><code class="plain">, </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'This view is amazing'</code><code class="plain">, </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'I feel great this morning'</code><code class="plain">, </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'I am so excited about the concert'</code><code class="plain">, </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'He is my best friend'</code><code class="plain">, </code><code class="string">'positive'</code><code class="plain">)]</code></td></tr></tbody></table></div></div></div>
<p>The following list contains the negative tweets:</p>
<div id="highlighter_305369" class="syntaxhighlighter  "><div class="bar                                              "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_305369_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_305369" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">neg_tweets </code><code class="keyword">=</code> <code class="plain">[(</code><code class="string">'I do not like this car'</code><code class="plain">, </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'This view is horrible'</code><code class="plain">, </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'I feel tired this morning'</code><code class="plain">, </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'I am not looking forward to the concert'</code><code class="plain">, </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">(</code><code class="string">'He is my enemy'</code><code class="plain">, </code><code class="string">'negative'</code><code class="plain">)]</code></td></tr></tbody></table></div></div></div>
<p>We take both of those lists and create a single list of tuples each containing two elements. First element is an array containing the words and second element is the type of sentiment. We get rid of the words smaller than 2 characters and we use lowercase for everything. </p>
<div id="highlighter_521015" class="syntaxhighlighter  "><div class="bar                                                                                                            "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_521015_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_521015" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">tweets </code><code class="keyword">=</code> <code class="plain">[]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="keyword">for</code> <code class="plain">(words, sentiment) </code><code class="keyword">in</code> <code class="plain">pos_tweets </code><code class="keyword">+</code> <code class="plain">neg_tweets:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">words_filtered </code><code class="keyword">=</code> <code class="plain">[e.lower() </code><code class="keyword">for</code> <code class="plain">e </code><code class="keyword">in</code> <code class="plain">words.split() </code><code class="keyword">if</code> <code class="functions">len</code><code class="plain">(e) &gt;</code><code class="keyword">=</code> <code class="value">3</code><code class="plain">] </code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">tweets.append((words_filtered, sentiment))</code></td></tr></tbody></table></div></div></div>
<p>The list of tweets now looks like this:</p>
<div id="highlighter_677086" class="syntaxhighlighter  "><div class="bar                              "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_677086_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_677086" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">tweets </code><code class="keyword">=</code> <code class="plain">[</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'love'</code><code class="plain">, </code><code class="string">'this'</code><code class="plain">, </code><code class="string">'car'</code><code class="plain">], </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'this'</code><code class="plain">, </code><code class="string">'view'</code><code class="plain">, </code><code class="string">'amazing'</code><code class="plain">], </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'feel'</code><code class="plain">, </code><code class="string">'great'</code><code class="plain">, </code><code class="string">'this'</code><code class="plain">, </code><code class="string">'morning'</code><code class="plain">], </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'excited'</code><code class="plain">, </code><code class="string">'about'</code><code class="plain">, </code><code class="string">'the'</code><code class="plain">, </code><code class="string">'concert'</code><code class="plain">], </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'best'</code><code class="plain">, </code><code class="string">'friend'</code><code class="plain">], </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'not'</code><code class="plain">, </code><code class="string">'like'</code><code class="plain">, </code><code class="string">'this'</code><code class="plain">, </code><code class="string">'car'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'this'</code><code class="plain">, </code><code class="string">'view'</code><code class="plain">, </code><code class="string">'horrible'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'feel'</code><code class="plain">, </code><code class="string">'tired'</code><code class="plain">, </code><code class="string">'this'</code><code class="plain">, </code><code class="string">'morning'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'not'</code><code class="plain">, </code><code class="string">'looking'</code><code class="plain">, </code><code class="string">'forward'</code><code class="plain">, </code><code class="string">'the'</code><code class="plain">, </code><code class="string">'concert'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'enemy'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">)]</code></td></tr></tbody></table></div></div></div>
<p>Finally, the list with the test tweets:</p>
<div id="highlighter_338433" class="syntaxhighlighter  "><div class="bar   "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_338433_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_338433" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">test_tweets </code><code class="keyword">=</code> <code class="plain">[</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'feel'</code><code class="plain">, </code><code class="string">'happy'</code><code class="plain">, </code><code class="string">'this'</code><code class="plain">, </code><code class="string">'morning'</code><code class="plain">], </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'larry'</code><code class="plain">, </code><code class="string">'friend'</code><code class="plain">], </code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'not'</code><code class="plain">, </code><code class="string">'like'</code><code class="plain">, </code><code class="string">'that'</code><code class="plain">, </code><code class="string">'man'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'house'</code><code class="plain">, </code><code class="string">'not'</code><code class="plain">, </code><code class="string">'great'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">([</code><code class="string">'your'</code><code class="plain">, </code><code class="string">'song'</code><code class="plain">, </code><code class="string">'annoying'</code><code class="plain">], </code><code class="string">'negative'</code><code class="plain">)]</code></td></tr></tbody></table></div></div></div>
<h2>Classifier</h2>
<p>The list of word features need to be extracted from the tweets. It is a list with every distinct words ordered by frequency of appearance. We use the following function to get the list plus the two helper functions.</p>
<div id="highlighter_833643" class="syntaxhighlighter  "><div class="bar   "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_833643_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_833643" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">word_features </code><code class="keyword">=</code> <code class="plain">get_word_features(get_words_in_tweets(tweets))</code></td></tr></tbody></table></div></div></div>
<div id="highlighter_491448" class="syntaxhighlighter  "><div class="bar      "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_491448_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_491448" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">def</code> <code class="plain">get_words_in_tweets(tweets):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">all_words </code><code class="keyword">=</code> <code class="plain">[]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">for</code> <code class="plain">(words, sentiment) </code><code class="keyword">in</code> <code class="plain">tweets:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">all_words.extend(words)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">all_words</code></td></tr></tbody></table></div></div></div>
<div id="highlighter_574331" class="syntaxhighlighter  "><div class="bar     "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_574331_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_574331" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">def</code> <code class="plain">get_word_features(wordlist):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">wordlist </code><code class="keyword">=</code> <code class="plain">nltk.FreqDist(wordlist)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">word_features </code><code class="keyword">=</code> <code class="plain">wordlist.keys()</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">word_features</code></td></tr></tbody></table></div></div></div>
<p>If we take a pick inside the function get_word_features, the variable ‘wordlist’ contains:</p>
<div id="highlighter_730385" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_730385_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_730385" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">&lt;FreqDist:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'this'</code><code class="plain">: </code><code class="value">6</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'car'</code><code class="plain">: </code><code class="value">2</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'concert'</code><code class="plain">: </code><code class="value">2</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'feel'</code><code class="plain">: </code><code class="value">2</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'morning'</code><code class="plain">: </code><code class="value">2</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'not'</code><code class="plain">: </code><code class="value">2</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'the'</code><code class="plain">: </code><code class="value">2</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'view'</code><code class="plain">: </code><code class="value">2</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'about'</code><code class="plain">: </code><code class="value">1</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'amazing'</code><code class="plain">: </code><code class="value">1</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">&gt;</code></td></tr></tbody></table></div></div></div>
<p>We end up with the following list of word features:</p>
<div id="highlighter_354732" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_354732_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_354732" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">word_features </code><code class="keyword">=</code> <code class="plain">[</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'this'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'car'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'concert'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'feel'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'morning'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'not'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'the'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'view'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'about'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="string">'amazing'</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="plain">]</code></td></tr></tbody></table></div></div></div>
<p>As you can see, ‘this’ is the most used word in our tweets, followed by ‘car’, followed by ‘concert’…</p>
<p>To create a classifier, we need to decide what features are relevant. To do that, we first need a feature extractor. The one we are going to use returns a dictionary indicating what words are contained in the input passed. Here, the input is the tweet. We use the word features list defined above along with the input to create the dictionary.</p>
<div id="highlighter_423248" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_423248_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_423248" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">def</code> <code class="plain">extract_features(document):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">document_words </code><code class="keyword">=</code> <code class="functions">set</code><code class="plain">(document)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">features </code><code class="keyword">=</code> <code class="plain">{}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">for</code> <code class="plain">word </code><code class="keyword">in</code> <code class="plain">word_features:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">features[</code><code class="string">'contains(%s)'</code> <code class="keyword">%</code> <code class="plain">word] </code><code class="keyword">=</code> <code class="plain">(word </code><code class="keyword">in</code> <code class="plain">document_words)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">features</code></td></tr></tbody></table></div></div></div>
<p>As an example, let’s call the feature extractor with the document ['love', 'this', 'car'] which is the first positive tweet. We obtain the following dictionary which indicates that the document contains the words: ‘love’, ‘this’ and ‘car’.</p>
<div id="highlighter_98180" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_98180_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_98180" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">{</code><code class="string">'contains(not)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(view)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(best)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(excited)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(morning)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(about)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(horrible)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(like)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(this)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(friend)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(concert)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(feel)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(love)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(looking)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(tired)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(forward)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(car)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(the)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(amazing)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(enemy)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(great)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>With our feature extractor, we can apply the features to our classifier using the method <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.util-module.html#apply_features">apply_features</a>. We pass the feature extractor along with the tweets list defined above.</p>
<div id="highlighter_652468" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_652468_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_652468" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">training_set </code><code class="keyword">=</code> <code class="plain">nltk.classify.apply_features(extract_features, tweets)</code></td></tr></tbody></table></div></div></div>
<p>The variable ‘training_set’ contains the labeled feature sets. It is a list of tuples which each tuple containing the feature dictionary and the sentiment string for each tweet. The sentiment string is also called ‘label’.</p>
<div id="highlighter_407995" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_407995_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_407995" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="plain">[({</code><code class="string">'contains(not)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(this)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(love)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(car)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(great)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">},</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">({</code><code class="string">'contains(not)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(view)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(this)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(amazing)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(enemy)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;</code><code class="string">'contains(great)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">},</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="string">'positive'</code><code class="plain">),</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;</code><code class="plain">...]</code></td></tr></tbody></table></div></div></div>
<p>Now that we have our training set, we can train our classifier.</p>
<div id="highlighter_217926" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_217926_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_217926" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">classifier </code><code class="keyword">=</code> <code class="plain">nltk.NaiveBayesClassifier.train(training_set)</code></td></tr></tbody></table></div></div></div>
<p>Here is a summary of what we just saw:</p>
<p><img src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/overview.png" alt="Twitter sentiment analysis with Python and NLTK"></p>
<p>The <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.naivebayes.NaiveBayesClassifier-class.html">Naive Bayes classifier</a> uses the prior probability of each label which is the frequency of each label in the training set, and the contribution from each feature. In our case, the frequency of each label is the same for ‘positive’ and ‘negative’. The word ‘amazing’ appears in 1 of 5 of the positive tweets and none of the negative tweets. This means that the likelihood of the ‘positive’ label will be multiplied by 0.2 when this word is seen as part of the input. </p>
<p>Let’s take a look inside the classifier train method in the source code of the NLTK library. ‘label_probdist’ is the prior probability of each label and ‘feature_probdist’ is the feature/value probability dictionary. Those two probability objects are used to create the classifier.</p>
<div id="highlighter_788114" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_788114_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_788114" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">def</code> <code class="plain">train(labeled_featuresets, estimator</code><code class="keyword">=</code><code class="plain">ELEProbDist):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># Create the P(label) distribution</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">label_probdist </code><code class="keyword">=</code> <code class="plain">estimator(label_freqdist)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># Create the P(fval|label, fname) distribution</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">feature_probdist </code><code class="keyword">=</code> <code class="plain">{}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>8</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">...</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>9</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">return</code> <code class="plain">NaiveBayesClassifier(label_probdist, feature_probdist)</code></td></tr></tbody></table></div></div></div>
<p>In our case, the probability of each label is 0.5 as we can see below. label_probdist is of type <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.probability.ELEProbDist-class.html">ELEProbDist</a>.</p>
<div id="highlighter_586859" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_586859_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_586859" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="functions">print</code> <code class="plain">label_probdist.prob(</code><code class="string">'positive'</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="value">0.5</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="functions">print</code> <code class="plain">label_probdist.prob(</code><code class="string">'negative'</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="value">0.5</code></td></tr></tbody></table></div></div></div>
<p>The feature/value probability dictionary associates expected likelihood estimate to a feature and label. We can see that the probability for the input to be negative is about 0.077 when the input contains the word ‘best’.</p>
<div id="highlighter_145706" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_145706_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_145706" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">print</code> <code class="plain">feature_probdist</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="plain">{(</code><code class="string">'negative'</code><code class="plain">, </code><code class="string">'contains(view)'</code><code class="plain">): &lt;ELEProbDist based on </code><code class="value">5</code> <code class="plain">samples&gt;,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">(</code><code class="string">'positive'</code><code class="plain">, </code><code class="string">'contains(excited)'</code><code class="plain">): &lt;ELEProbDist based on </code><code class="value">5</code> <code class="plain">samples&gt;,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="plain">(</code><code class="string">'negative'</code><code class="plain">, </code><code class="string">'contains(best)'</code><code class="plain">): &lt;ELEProbDist based on </code><code class="value">5</code> <code class="plain">samples&gt;, ...}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="functions">print</code> <code class="plain">feature_probdist[(</code><code class="string">'negative'</code><code class="plain">, </code><code class="string">'contains(best)'</code><code class="plain">)].prob(</code><code class="color1">True</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="value">0.076923076923076927</code></td></tr></tbody></table></div></div></div>
<p>We can display the most informative features for our classifier using the method <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.naivebayes.NaiveBayesClassifier-class.html#show_most_informative_features">show_most_informative_features</a>. Here, we see that if the input does not contain the word ‘not’ then the positive ration is 1.6. </p>
<div id="highlighter_164658" class="syntaxhighlighter  "><div class="bar "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_164658_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_164658" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="functions">print</code> <code class="plain">classifier.show_most_informative_features(</code><code class="value">32</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">Most Informative Features</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(</code><code class="keyword">not</code><code class="plain">) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">positi : negati </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.6</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(tired) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">positi : negati </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(excited) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">negati : positi </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(great) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">negati : positi </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(looking) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">positi : negati </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(like) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">positi : negati </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(love) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">negati : positi </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(amazing) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">negati : positi </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(enemy) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">positi : negati </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(about) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">negati : positi </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(best) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">negati : positi </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(forward) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">positi : negati </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(friend) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">negati : positi </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">contains(horrible) </code><code class="keyword">=</code> <code class="color1">False</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="plain">positi : negati </code><code class="keyword">=</code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <code class="value">1.2</code> <code class="plain">: </code><code class="value">1.0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="plain">...</code></td></tr></tbody></table></div></div></div>
<h2>Classify</h2>
<p>Now that we have our classifier initialized, we can try to classify a tweet and see what the sentiment type output is. Our classifier is able to detect that this tweet has a positive sentiment because of the word ‘friend’ which is associated to the positive tweet ‘He is my best friend’. </p>
<div id="highlighter_759136" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_759136_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_759136" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">tweet </code><code class="keyword">=</code> <code class="string">'Larry is my friend'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">print</code> <code class="plain">classifier.classify(extract_features(tweet.split()))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">positive</code></td></tr></tbody></table></div></div></div>
<p>Let’s take a look at how the <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.naivebayes.NaiveBayesClassifier-class.html#classify">classify</a> method works internally in the NLTK library. What we pass to the classify method is the feature set of the tweet we want to analyze. The feature set dictionary indicates that the tweet contains the word ‘friend’.</p>
<div id="highlighter_434050" class="syntaxhighlighter  "><div class="bar  "><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_434050_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_434050" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>01</code></td><td class="content"><code class="keyword">print</code> <code class="plain">extract_features(tweet.split())</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>02</code></td><td class="content"><code class="plain">{</code><code class="string">'contains(not)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>03</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(view)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>04</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(best)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>05</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(excited)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>06</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(morning)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>07</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(about)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>08</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(horrible)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>09</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(like)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>10</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(this)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>11</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(friend)'</code><code class="plain">: </code><code class="color1">True</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>12</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(concert)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>13</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(feel)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>14</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(love)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>15</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(looking)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>16</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(tired)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>17</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(forward)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>18</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(car)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>19</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(the)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>20</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(amazing)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>21</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(enemy)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">,</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>22</code></td><td class="content"><code class="spaces">&nbsp;</code><code class="string">'contains(great)'</code><code class="plain">: </code><code class="color1">False</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<div id="highlighter_36468" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_36468_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_36468" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="keyword">def</code> <code class="plain">classify(</code><code class="color1">self</code><code class="plain">, featureset):</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># Discard any feature names that we've never seen before.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># Find the log probability of each label, given the features.</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>4</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># Then add in the log probability of features given labels.</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>5</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># Generate a probability distribution dictionary using the dict logprod</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>6</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># Return the sample with the greatest probability from the probability</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>7</code></td><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># distribution dictionary</code></td></tr></tbody></table></div></div></div>
<p>Let’s go through that method using our example. The parameter passed to the method classify is the feature set dictionary we saw above. The first step is to discard any feature names that are not know by the classifier. This step does nothing in our case so the feature set stays the same.</p>
<p>Next step is to find the log probability for each label. The probability of each label (‘positive’ and ‘negative’) is 0.5. The log probability is the log base 2 of that which is -1. We end up with logprod containing the following:</p>
<div id="highlighter_812998" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_812998_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_812998" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">{</code><code class="string">'positive'</code><code class="plain">: </code><code class="keyword">-</code><code class="value">1.0</code><code class="plain">, </code><code class="string">'negative'</code><code class="plain">: </code><code class="keyword">-</code><code class="value">1.0</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>The log probability of features given labels is then added to logprod. This means that for each label, we go through the items in the feature set and we add the log probability of each item to logprod[label]. For example, we have the feature name ‘friend’ and the feature value True. Its log probability for the label ‘positive’ in our classifier is -2.12. This value is added to logprod['positive']. We end up with the following logprod dictionary.</p>
<div id="highlighter_646551" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_646551_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_646551" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">{</code><code class="string">'positive'</code><code class="plain">: </code><code class="keyword">-</code><code class="value">5.4785441837188511</code><code class="plain">, </code><code class="string">'negative'</code><code class="plain">: </code><code class="keyword">-</code><code class="value">14.784261334886439</code><code class="plain">}</code></td></tr></tbody></table></div></div></div>
<p>The probability distribution dictionary of type <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.probability.DictionaryProbDist-class.html">DictionaryProbDist</a> is generated:</p>
<div id="highlighter_866012" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_866012_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_866012" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">DictionaryProbDist(logprob, normalize</code><code class="keyword">=</code><code class="color1">True</code><code class="plain">, log</code><code class="keyword">=</code><code class="color1">True</code><code class="plain">)</code></td></tr></tbody></table></div></div></div>
<p>The label with the greatest probability is returned which is ‘positive’. Our classifier finds out that this tweets has a positive sentiment based on the training we did.</p>
<p>Another example is the tweet ‘My house is not great’. The word ‘great’ weights more on the positive side but the word ‘not’ is part of two negative tweets in our training set so the output from the classifier is ‘negative’. Of course, the following tweet: ‘The movie is not bad’ would return ‘negative’ even if it is ‘positive’. Again, a large and well chosen sample will help with the accuracy of the classifier.</p>
<p>Taking the following test tweet ‘Your song is annoying’. The classifier thinks it is positive. The reason is that we don’t have any information on the feature name ‘annoying’. Larger the training sample tweets is, better the classifier will be.</p>
<div id="highlighter_823354" class="syntaxhighlighter  "><div class="bar"><div class="toolbar"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#viewSource" title="view source" style="width: 16px; height: 16px;" class="item viewSource">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_823354_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="opaque" flashvars="highlighterId=highlighter_823354" menu="false" src="http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#printSource" title="print" style="width: 16px; height: 16px;" class="item printSource">print</a><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#about" title="?" style="width: 16px; height: 16px;" class="item about">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="number"><code>1</code></td><td class="content"><code class="plain">tweet </code><code class="keyword">=</code> <code class="string">'Your song is annoying'</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="number"><code>2</code></td><td class="content"><code class="functions">print</code> <code class="plain">classifier.classify(extract_features(tweet.split()))</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="number"><code>3</code></td><td class="content"><code class="plain">positive</code></td></tr></tbody></table></div></div></div>
<p>There is an <a href="http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.util-module.html#accuracy">accuracy</a> method we can use to check the quality of our classifier by using our test tweets. We get 0.8 in our case which is high because we picked our test tweets for this article. The key is to have a very large number of manually classified positive and negative tweets.</p>
<p>Voilà. Don’t hesitate to post a comment if you have any feedback.</p>
			</div><!-- end post content -->
		<div class="metawrap">
		<p>
			tags: <a href="http://www.laurentluce.com/posts/tag/python/" rel="tag">Python</a><br>			posted in <a href="http://www.laurentluce.com/posts/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a> by Laurent Luce					</p>

		<p class="interact"> Follow comments via the <a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/feed/">RSS Feed</a> | <a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#respond">Leave a comment</a> | <a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/trackback/">Trackback URL</a> </p>
		</div><!-- end meta wrap -->
	</div><!-- end post -->

<!-- You can start editing here. -->
<div id="commentwrap">
<h3 id="comments">31 Comments to "Twitter sentiment analysis using Python and NLTK"</h3>
	
	<ol id="commentlist">
					<li class="alt" id="comment-10087">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/b98960747cc2dcdcd27675921c338d8f" class="avatar avatar-32 photo" height="32" width="32"><cite>Koray Sahinoglu</cite> wrote:</p>
			<p>Very nice example with detailed explanations. Good work, thank you.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10087" title="">Link</a> | January 2nd, 2012 at 11:16 pm </p>
		</li>
					<li class="" id="comment-10097">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/ba27dd571b1ba2f34cac069d4778d4e6" class="avatar avatar-32 photo" height="32" width="32"><cite>Patrick</cite> wrote:</p>
			<p>Hi,<br>
very good article. But I found two liitle errors:<br>
1.) Your function get_word_features() does only need one argument.<br>
2.)apply_features() needs to be called upon  nltk.classify.util instead of only nltk.classify</p>
<p>Thanks for sharing.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10097" title="">Link</a> | January 3rd, 2012 at 4:40 am </p>
		</li>
					<li class="alt" id="comment-10103">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/fc754f70f57f109902e8ba61c99eb184" class="avatar avatar-32 photo" height="32" width="32"><cite><a href="http://tuxcoder.wordpress.com/" rel="external nofollow" class="url">Arulalan.T</a></cite> wrote:</p>
			<p>Thanks a lot. Very very useful coding stuff.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10103" title="">Link</a> | January 3rd, 2012 at 6:12 am </p>
		</li>
					<li class="" id="comment-10118">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/7605fb32400453068c5d5932f11c5e2a" class="avatar avatar-32 photo" height="32" width="32"><cite>Elliott</cite> wrote:</p>
			<p>Really great article ! You say in the real implementation, you use around 1200 tweets; is there a GUI, or is it possible to automate the process of adding all these tweets into their respective lists? It just seems kind of long to have to do it by hand.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10118" title="">Link</a> | January 3rd, 2012 at 9:36 am </p>
		</li>
					<li class="alt" id="comment-10134">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/85abe641742822334610140d3092958f" class="avatar avatar-32 photo" height="32" width="32"><cite>Hywel M</cite> wrote:</p>
			<p>Thanks very much. Excellent timing for me as I was looking how to do this – but with Welsh language tweets. On a quick read I haven’t spotted anything that limits this to working only with English – or have I missed anything?</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10134" title="">Link</a> | January 3rd, 2012 at 1:34 pm </p>
		</li>
					<li class="" id="comment-10167">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/2cede663a8d43f6038c010fea7f68e6c" class="avatar avatar-32 photo" height="32" width="32"><cite>mark</cite> wrote:</p>
			<p>very nice posting! it makes me wondering what else is possible. i’ll definitely add your blog to my blogroll.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10167" title="">Link</a> | January 4th, 2012 at 6:14 am </p>
		</li>
					<li class="alt" id="comment-10242">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/85abe641742822334610140d3092958f" class="avatar avatar-32 photo" height="32" width="32"><cite>Hywel M</cite> wrote:</p>
			<p>Excellent guide. Just what I was looking for as I’m just starting to explore sentiment analysis. Thanks very much.</p>
<p>I can’t see what ‘num_word_features’ is doing in the 3rd line of code under Classifier.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10242" title="">Link</a> | January 5th, 2012 at 5:00 pm </p>
		</li>
					<li class="authorpost" id="comment-10328">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@Patrick Thanks for the feedback. I fixed the call to get_word_features(). Regarding apply_features, it says nltk.classify.apply_features in the nltk online book: <a href="http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html" rel="nofollow">http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html</a>. It has been working for me so I am not sure what might have changed.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10328" title="">Link</a> | January 7th, 2012 at 10:53 am </p>
		</li>
					<li class="authorpost" id="comment-10329">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@Elliott I built a simple web interface to help me classifying the tweets. I also stored the tweets in a Redis DB in 2 different lists: positive and negative. For the article, I am using hard coded list to simplify things.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10329" title="">Link</a> | January 7th, 2012 at 10:55 am </p>
		</li>
					<li class="authorpost" id="comment-10330">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@Hywel You are correct. The same can apply to other languages. I am actually using that method to classify tweets written in French. I am not satisfied with the results yet because the sample I classified manually is too small. An issue with other languages than English is that it is difficult to find a large corpus of classified tweets.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10330" title="">Link</a> | January 7th, 2012 at 11:08 am </p>
		</li>
					<li class="authorpost" id="comment-10331">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@ Hywel I fixed the call to get_word_features. I am trimming the number of word features in the real application but I keep it simpler for the post.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10331" title="">Link</a> | January 7th, 2012 at 11:13 am </p>
		</li>
					<li class="alt" id="comment-10335">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/7605fb32400453068c5d5932f11c5e2a" class="avatar avatar-32 photo" height="32" width="32"><cite>Elliott</cite> wrote:</p>
			<p>@Laurent Luce The web interface is quite a good idea. If anyone is looking for a pre-classified test corpus, I found one here: <a href="http://sandersanalytics.com/lab/twitter-sentiment/" rel="nofollow">http://sandersanalytics.com/lab/twitter-sentiment/</a>.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10335" title="">Link</a> | January 7th, 2012 at 3:53 pm </p>
		</li>
					<li class="authorpost" id="comment-10677">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@Elliott Thanks for the link to that pre-classified test corpus. Here is another one using emoticons: <a href="http://www.stanford.edu/~alecmgo/cs224n/twitterdata.2009.05.25.c.zip" rel="nofollow">http://www.stanford.edu/~alecmgo/cs224n/twitterdata.2009.05.25.c.zip</a><br>
I had to manually classified the tweets on my side because they are in French and I didn’t find a pre-classified corpus in French.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10677" title="">Link</a> | January 14th, 2012 at 11:12 am </p>
		</li>
					<li class="alt" id="comment-10700">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/7605fb32400453068c5d5932f11c5e2a" class="avatar avatar-32 photo" height="32" width="32"><cite>Elliott</cite> wrote:</p>
			<p>@Laurent Luce Pour les liens en français, je sais que ça peut sembler un peu arbitraire, mais prendre un corpus en anglais et le faire passer par Google Translate, je vois pas de raison pour que ça marche pas!</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-10700" title="">Link</a> | January 14th, 2012 at 9:48 pm </p>
		</li>
					<li class="" id="comment-12042">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/d0732006e77cba51c6fa3c5369f0474c" class="avatar avatar-32 photo" height="32" width="32"><cite>Ultraviolet</cite> wrote:</p>
			<p>Very useful Laurent! thanks for your post</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-12042" title="">Link</a> | February 18th, 2012 at 3:25 pm </p>
		</li>
					<li class="alt" id="comment-12882">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/380fd69e59ebe4c8797d183926e61dd4" class="avatar avatar-32 photo" height="32" width="32"><cite><a href="http://student/" rel="external nofollow" class="url">Phil Day</a></cite> wrote:</p>
			<p>Thanks so much for this, great blog. <img src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-12882" title="">Link</a> | March 7th, 2012 at 1:24 pm </p>
		</li>
					<li class="" id="comment-13657">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/e9b83e97abee86458281104254b74224" class="avatar avatar-32 photo" height="32" width="32"><cite>Luca</cite> wrote:</p>
			<p>The algorithm used by NLTK is highly inefficient. With about 9000 positive tweets and 9000 negative tweets on a 8gb ram quad core server (2ghz each) it takes 45 minutes to be trained (running on pypy). I highly suggest to write your own implementation of the Baesian Classifier; mine takes about 1.5 minutes to train with 9000/9000 tweets on the same machine.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-13657" title="">Link</a> | March 13th, 2012 at 11:51 am </p>
		</li>
					<li class="alt" id="comment-15200">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/d79e34c362b10a0e98bdae7af2fdfaa0" class="avatar avatar-32 photo" height="32" width="32"><cite>Mark</cite> wrote:</p>
			<p>What would be a reasonable number of manually classified tweets to use in order to train the classifier in a real world system? </p>
<p>Would there be a point at which manually training more tweets becomes pointless or detrimental?</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-15200" title="">Link</a> | March 26th, 2012 at 4:02 am </p>
		</li>
					<li class="" id="comment-16683">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/eed3da94be943b41248eefbf2c8d0a7f" class="avatar avatar-32 photo" height="32" width="32"><cite><a href="http://ravikiranj.net/" rel="external nofollow" class="url">Ravikiran Janardhana</a></cite> wrote:</p>
			<p>The clarity of your post and the brilliant explanation is just amazing ! Great work Sir <img src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/icon_smile.gif" alt=":)" class="wp-smiley">  !</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-16683" title="">Link</a> | April 15th, 2012 at 8:19 am </p>
		</li>
					<li class="alt" id="comment-19253">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/fb17bfd4839f84012ed83914b619c579" class="avatar avatar-32 photo" height="32" width="32"><cite><a href="http://arbiesamong.com/" rel="external nofollow" class="url">Arbie Samong</a></cite> wrote:</p>
			<p>For those getting the error<br>
nltk.classify has no module apply_features</p>
<p>make sure your nltk version is correct:<br>
PyYAML==3.09<br>
nltk==2.0.1rc1</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-19253" title="">Link</a> | May 11th, 2012 at 4:01 am </p>
		</li>
					<li class="authorpost" id="comment-21984">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@Mark. There are few papers out there on training sets. Size of 200k-300k is not uncommon. Not sure where the upper limit is.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-21984" title="">Link</a> | June 1st, 2012 at 6:09 pm </p>
		</li>
					<li class="alt" id="comment-22843">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/6f3b407df026f579ac1d2aeaa4e60910" class="avatar avatar-32 photo" height="32" width="32"><cite>Ana</cite> wrote:</p>
			<p>Hi…it’s great explanation. Thanks for sharing…</p>
<p>Right now I’m working in this kind of work, and having great challenge in converting tweet language to standard form. Any advice? Thanks <img src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/icon_smile.gif" alt=":)" class="wp-smiley"> </p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-22843" title="">Link</a> | June 10th, 2012 at 9:40 am </p>
		</li>
					<li class="" id="comment-25510">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/e4bfc703c2ecbf1fa2eb5f62e80a7859" class="avatar avatar-32 photo" height="32" width="32"><cite>Thiago</cite> wrote:</p>
			<p>Thanks a lot for the tutorial. I followed it with some modifications for my purpose. But, like Luca wrote, it’s very inefficient, but it works efficiently. With your base I got 0.81 of accuracy. With a movie review database I got an 0.77. And with another tweet database selected by my group I got a lot less: 0,69 of accuracy. I calculated these accuracy using a 3-fold cross validation.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-25510" title="">Link</a> | July 2nd, 2012 at 10:39 am </p>
		</li>
					<li class="alt" id="comment-30812">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/f29e862e012e69cf44a2380d17961313" class="avatar avatar-32 photo" height="32" width="32"><cite>Jaimin</cite> wrote:</p>
			<p>Very good information, and detailed explanation. Thanks for sharing it.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-30812" title="">Link</a> | September 3rd, 2012 at 7:37 pm </p>
		</li>
					<li class="" id="comment-31544">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/e537ce1e3e38b22103cbbcf69015c700" class="avatar avatar-32 photo" height="32" width="32"><cite>Pramod Gupta</cite> wrote:</p>
			<p>Hi Laurent,</p>
<p>Can you please let me know some good references for Sentiment Analysis especially implementation issues e.g., choosing word features, feature extractions etc.</p>
<p>Thanks</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-31544" title="">Link</a> | September 13th, 2012 at 2:25 pm </p>
		</li>
					<li class="alt" id="comment-31604">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/5c3225273894362eb0f6372723ea3e8b" class="avatar avatar-32 photo" height="32" width="32"><cite><a href="http://thinknook.com/" rel="external nofollow" class="url">Links</a></cite> wrote:</p>
			<p>This is a really great walk through of sentiment classification using NLTK (especially since my Python skills are non-existent), thanks for sharing Laurent!</p>
<p>Just an FYI- the apply_features function seems to be really slow for a large number of tweets (e.g. 100,000 tweets have taken over 12 hours and still running). any tips to improve the performance?, this is not even half of my training set!</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-31604" title="">Link</a> | September 14th, 2012 at 1:24 am </p>
		</li>
					<li class="" id="comment-32400">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/cde44c4be4e82e1f8ac1076d48999863" class="avatar avatar-32 photo" height="32" width="32"><cite>Deyan</cite> wrote:</p>
			<p>I don’t understand.What is the purpose of test_tweets??</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-32400" title="">Link</a> | September 24th, 2012 at 6:02 am </p>
		</li>
					<li class="authorpost" id="comment-34564">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@Deyan: test_tweets is our manually classified list of tuples: words + positive/negative.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-34564" title="">Link</a> | October 16th, 2012 at 9:20 am </p>
		</li>
					<li class="alt" id="comment-34933">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/0b5fcd44a0ff8f4a1bcb231cf714c1e6" class="avatar avatar-32 photo" height="32" width="32"><cite><a href="http://bonnieyu.tumblr.com/" rel="external nofollow" class="url">Bonnie</a></cite> wrote:</p>
			<p>nice blog ! it’s very easy to follow. I wrote my own naive bayes python classifier before but think it’s time to move on to playing with other libraries. </p>
<p>btw does the theme you’re using make it easy to share code? or did you do the highlighting yourself? I’ve been meaning to write some posts where I can share code for people.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-34933" title="">Link</a> | October 19th, 2012 at 11:39 am </p>
		</li>
					<li class="" id="comment-37392">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/961cb7384e3a5b293cc897708dd246f1" class="avatar avatar-32 photo" height="32" width="32"><cite>koda</cite> wrote:</p>
			<p>Really nice article. @luca can you share the links or blog post for your implementation ?</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-37392" title="">Link</a> | November 9th, 2012 at 10:00 pm </p>
		</li>
					<li class="authorpost" id="comment-39196">
			<p><img alt="" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/a37d0d4170a049c8e4e34c1c34ea8ca6" class="avatar avatar-32 photo" height="32" width="32"><cite>Laurent Luce</cite> wrote:</p>
			<p>@Bonnie: I use SyntaxHighlighter Evolved.</p>
						<p class="commentmetadata"><a href="http://www.laurentluce.com/posts/twitter-sentiment-analysis-using-python-and-nltk/#comment-39196" title="">Link</a> | November 21st, 2012 at 7:35 am </p>
		</li>
		</ol>
		
<h3 id="respond">Leave Your Comment</h3>
		<form action="http://www.laurentluce.com/wp-comments-post.php" method="post" id="commentform">
					<p><input type="text" name="author" id="author" value="" size="22" tabindex="1">
			<label for="author"><small>Name (required)</small></label></p>
			
			<p><input type="text" name="email" id="email" value="" size="22" tabindex="2">
			<label for="email"><small>Mail (will not be published) (required)</small></label></p>
			
			<p><input type="text" name="url" id="url" value="" size="22" tabindex="3">
			<label for="url"><small>Website</small></label></p>
				<!-- to show commenters which tags are allowed, uncomment the line below. -->
		<!--<p><strong>Allowed (X)HTML:</strong> &lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </p>-->
		<textarea name="comment" id="comment" cols="50" rows="10" tabindex="4"></textarea>
		<p><input name="submit" type="submit" id="submit" tabindex="5" value="Post Comment"></p>
		<input type="hidden" name="comment_post_ID" value="321">
		<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="c03a17801d"></p>	</form>

</div><!-- end comment wrap --></div>
</div>
</div>
<div id="ft">
<script type="text/javascript" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/shCore.js"></script>
<script type="text/javascript" src="./Twitter sentiment analysis using Python and NLTK   Laurent Luce's Blog_files/shBrushPython.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shCore.css?ver=2.1.364";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shThemeEclipse.css?ver=2.1.364";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://www.laurentluce.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.all();
</script>
</div>
</div><!-- End id=doc -->
</div><!-- End id=wrapper -->
<div class="clear">&nbsp;</div>
<div id="footnote" align="center">
	Powered by <a href="http://wordpress.org/">Wordpress</a> and <a href="http://www.mysql.com/">MySQL</a>. Theme by <a href="http://code.openark.org/blog/shlomi-noach">Shlomi Noach</a>, <a href="http://openark.org/">openark.org</a>
</div>
</div><!-- End align=center -->


<dl style="display: none;" id="__readable_extension_definitions"><dd id="__readable_option__text_font">%22PT%20Serif%22</dd><dd id="__readable_option__text_font_header">%22PT%20Serif%22</dd><dd id="__readable_option__text_font_monospace">Inconsolata</dd><dd id="__readable_option__text_size">16px</dd><dd id="__readable_option__text_line_height">1.5em</dd><dd id="__readable_option__box_width">36em</dd><dd id="__readable_option__color_background">%23f3f2ee</dd><dd id="__readable_option__color_text">%231f0909</dd><dd id="__readable_option__color_links">%23065588</dd><dd id="__readable_option__text_align">normal</dd><dd id="__readable_option__base">theme-1</dd><dd id="__readable_option__footnote_links">on_print</dd><dd id="__readable_option__large_graphics">do_nothing</dd><dd id="__readable_option__custom_css">none</dd><dd id="__readable_var__theme">theme-1</dd><dd id="__readable_var__keys_activation">Control%20%2B%20Command%20%2B%20Right%20Arrow</dd><dd id="__readable_var__keys_clip">Control%20%2B%20Command%20%2B%20Up%20Arrow</dd><dd id="__readable_var__keys_highlight">Control%20%2B%20Command%20%2B%20H</dd><dd id="__readable_var__keys_speech">Control%20%2B%20Alt%20%2B%20S</dd><dd id="__readable_var__clip_tag">none</dd><dd id="__readable_var__clip_notebook">none</dd><dd id="__readable_var__clip_notebook_guid">none</dd><dd id="__readable_var__related_notes">enabled</dd><dd id="__readable_var__smart_filing">enabled</dd><dd id="__readable_var__smart_filing_for_business">disabled</dd><dd id="__readable_var__speech_speed">normal</dd><dd id="__readable_var__speech_gender">default</dd><dd id="__readable_var__custom_theme_options">none</dd><dd id="__readable_translation__menu__close__tooltip">Hide%20the%20overlay.</dd><dd id="__readable_translation__menu__clip_to_evernote__tooltip">Clip%20to%20Evernote.</dd><dd id="__readable_translation__menu__highlight_to_evernote__tooltip">Highlight.</dd><dd id="__readable_translation__menu__print__tooltip">Print.</dd><dd id="__readable_translation__menu__settings__tooltip">Show%20Themes.</dd><dd id="__readable_translation__menu__fitts__tooltip">Hide%20the%20overlay.</dd><dd id="__readable_translation__menu__speak__tooltip">Text%20To%20Speech</dd><dd id="__readable_translation__menu__speak__play__tooltip">Play</dd><dd id="__readable_translation__menu__speak__pause__tooltip">Pause</dd><dd id="__readable_translation__menu__speak__forward__tooltip">Go%20Forwards</dd><dd id="__readable_translation__menu__speak__rewind__tooltip">Go%20Backwards</dd><dd id="__readable_translation__rtl__main__label">Text%20direction%3F</dd><dd id="__readable_translation__rtl__ltr__label">Left-to-right</dd><dd id="__readable_translation__rtl__rtl__label">Right-to-left</dd><dd id="__readable_translation__blank_error__heading">Tips%20for%20using%20Evernote%20Clearly</dd><dd id="__readable_translation__blank_error__body">Clearly%20is%20currently%20designed%20to%20work%20on%20article%20pages.%20An%20article%20page%20is%20any%20page%20that%20contains%20one%20large%20block%20of%20text%20--%20like%2C%20for%20example%2C%20a%20newspaper%20article%20or%20blog%20post.</dd><dd id="__readable_translation__related_notes__title">Related%20Notes</dd><dd id="__readable_translation__related_notes__disable_short">Disable%3F</dd><dd id="__readable_translation__related_notes__disable_long">Do%20you%20want%20to%20disable%20Related%20Notes%3F</dd><dd id="__readable_translation__filing_info__title_normal">Filed%20in%3A</dd><dd id="__readable_translation__filing_info__title_smart">Smart%20Filed%20in%3A</dd><dd id="__readable_translation__filing_info__default_notebook">Your%20default%20Notebook</dd><dd id="__readable_translation__filing_info__view">View</dd><dd id="__readable_translation__filing_info__edit">Edit</dd><dd id="__readable_translation__filing_info__sentence">Clipped%20into%20the%20%5B%3Dnotebook%5D%20notebook%2C%20and%20tagged%20with%20%5B%3Dtags%5D.</dd><dd id="__readable_translation__filing_info__sentence_no_tags">Clipped%20into%20the%20%5B%3Dnotebook%5D%20notebook.</dd><dd id="__readable_translation__filing_info__sentence_and">and</dd><dd id="__readable_translation__filing_info__sentence_other_tags">other%20tags</dd><dd id="__readable_translation__evernote_clipping">Clipping...</dd><dd id="__readable_translation__evernote_clipping_failed">Clipping%20failed.</dd><dd id="__readable_translation__evernote_login__heading">Sign%20in%20to%20Evernote</dd><dd id="__readable_translation__evernote_login__spinner">Signing%20in%20to%20Evernote</dd><dd id="__readable_translation__evernote_login__create_account">Create%20an%20account</dd><dd id="__readable_translation__evernote_login__button_do__label">Sign%20in</dd><dd id="__readable_translation__evernote_login__button_cancel__label">Cancel</dd><dd id="__readable_translation__evernote_login__username__label">Evernote%20Username%20or%20Email%20Address</dd><dd id="__readable_translation__evernote_login__password__label">Password</dd><dd id="__readable_translation__evernote_login__rememberMe__label">Remember%20me</dd><dd id="__readable_translation__evernote_login__username__error__required">Username%20is%20required.</dd><dd id="__readable_translation__evernote_login__username__error__length">Username%20must%20be%20between%201%20and%2064%20characters%20long.</dd><dd id="__readable_translation__evernote_login__username__error__format">Username%20contains%20bad%20characters.</dd><dd id="__readable_translation__evernote_login__username__error__invalid">Not%20a%20valid%2C%20active%20user.</dd><dd id="__readable_translation__evernote_login__password__error__required">Password%20is%20required.</dd><dd id="__readable_translation__evernote_login__password__error__length">Password%20must%20be%20between%206%20and%2064%20characters%20long.</dd><dd id="__readable_translation__evernote_login__password__error__format">Password%20contains%20bad%20characters.</dd><dd id="__readable_translation__evernote_login__password__error__invalid">Username%20and%20password%20do%20not%20match%20existing%20user.</dd><dd id="__readable_translation__evernote_login__general__error">Authentication%20failed.</dd><dd id="__readable_translation__settings__theme__1">Newsprint</dd><dd id="__readable_translation__settings__theme__2">Notable</dd><dd id="__readable_translation__settings__theme__3">Night%20Owl</dd><dd id="__readable_translation__settings__theme__custom">Custom</dd><dd id="__readable_translation__settings__fontSize__small">small</dd><dd id="__readable_translation__settings__fontSize__medium">medium</dd><dd id="__readable_translation__settings__fontSize__large">large</dd><dd id="__readable_translation__features__title__new">You%20have%20a%20new%20version%20of%20Evernote%20Clearly</dd><dd id="__readable_translation__features__title__all">Welcome%20to%20the%20new%20Evernote%20Clearly</dd><dd id="__readable_translation__features__speech__title">Text%20To%20Speech</dd><dd id="__readable_translation__features__speech__text">Sit%20back%20and%20let%20Clearly%20read%20blog%20posts%2C%20articles%2C%20and%20web%20pages%20to%20you%20thanks%20to%20the%20new%20Text%20To%20Speech%20feature%2C%20available%20exclusively%20for%20Evernote%20Premium%20subscribers.</dd><dd id="__readable_translation__features__speech__text__powered">Evernote%20Clearly%20is%20powered%20by%20%5B%3Dservice%5D.</dd><dd id="__readable_translation__features__speech__text__requires">Requires%20%5B%3Dproduct%5D.</dd><dd id="__readable_translation__features__speech__text__available">Text%20To%20Speech%20in%2021%20languages%3A</dd><dd id="__readable_translation__features__speech__text__available_languages">English%2C%20Japanese%2C%20Spanish%2C%20French%2C%20German%2C%20Chinese%2C%20Korean%2C%20Arabic%2C%20Czech%2C%20Danish%2C%20Dutch%2C%20Finnish%2C%20Greek%2C%20Hungarian%2C%20Italian%2C%20Norwegian%2C%20Polish%2C%20Portuguese%2C%20Russian%2C%20Swedish%20and%20Turkish.</dd><dd id="__readable_translation__features__speech__text__try">Try%20Text%20To%20Speech</dd><dd id="__readable_translation__features__speech__text__upgrade">Upgrade%20to%20Evernote%20Premium</dd><dd id="__readable_translation__features__speech__text__language">Language%20not%20supported</dd><dd id="__readable_translation__features__speech__text__play">Play%20using%20this%20language</dd><dd id="__readable_translation__features__speech__text__cancel">Cancel</dd><dd id="__readable_translation__features__speech__no_language_title">Language%20not%20supported</dd><dd id="__readable_translation__features__speech__no_language_explanation">Evernote%20Clearly%20was%20not%20able%20to%20determine%20the%20language%20of%20this%20article.%20If%20you%20recognize%20the%20language%2C%20select%20it%20below%20and%20we%27ll%20play%20it.</dd><dd id="__readable_translation__features__clipping__title">Clip%20to%20Evernote</dd><dd id="__readable_translation__features__clipping__text">Save%20what%20you%27re%20reading%20to%20your%20Evernote%20account%20with%20one%20click.%20Access%20clips%20from%20any%20device%2C%20anytime%20in%20Evernote.</dd><dd id="__readable_translation__features__highlighting__title">Highlighting</dd><dd id="__readable_translation__features__highlighting__text">Highlight%20text%20you%20want%20to%20remember%20%26%20quickly%20find%20it%20in%20your%20Evernote%20account.%20Highlighting%20changes%20you%20make%20in%20Clearly%20will%20be%20updated%20in%20your%20Evernote%20account%20automatically.</dd><dd id="__readable_translation__features__related_notes__title">Related%20Notes</dd><dd id="__readable_translation__features__related_notes__text">Magically%20rediscover%20notes%20from%20your%20Evernote%20account%20that%20are%20related%20to%20the%20page%20you%20are%20viewing.%20Related%20Notes%20are%20displayed%20at%20the%20bottom%20of%20the%20article%20or%20on%20the%20right%20side%20if%20space%20permits.</dd><dd id="__readable_translation__features__smart_filing__title">Smart%20Filing</dd><dd id="__readable_translation__features__smart_filing__text">Automatically%20assign%20tags%20to%20your%20Web%20clips%20and%20saves%20them%20to%20the%20appropriate%20notebook%2C%20so%20you%20don%27t%20have%20to.</dd><dd id="__readable_translation__features__eula_notice">By%20using%20Clearly%2C%20you%20agree%20to%20our%20%5B%3Deula%5D.</dd><dd id="__readable_translation__features__close2">Close</dd><dd id="__readable_translation__misc__page">page</dd></dl><script src="chrome-extension://iooicodkiihhpojmmeghjclgihfjdjhj/js/__bookmarklet_to_inject.js" class="bookmarklet_launch"></script><script src="chrome-extension://iooicodkiihhpojmmeghjclgihfjdjhj/js/target.js"></script><style id="readableCSS1" type="text/css">#readable_iframe { margin: 0; padding: 0; border: none; position: absolute; width: 100%; height: 100%; min-height: 100%; top: -100%; left: -100%; z-index: 2147483647 !important; } </style><iframe id="readable_iframe" frameborder="0" allowtransparency="true" scrolling="auto" style="top: -100%; left: -100%;"></iframe><style id="readableCSS2" type="text/css">html.readableBeforeVisible, html > body.readableBeforeVisible, body.readableBeforeVisible { position: static !important; margin: 0 !important; padding: 0 !important; border: 0 !important; } html.readableVisible, html > body.readableVisible, body.readableVisible { overflow: hidden !important; overflow-x: hidden !important; overflow-y: hidden !important; } html.readableBeforeVisible object, html.readableBeforeVisible embed, html.readableBeforeVisible iframe, html > body.readableBeforeVisible object, html > body.readableBeforeVisible embed, html > body.readableBeforeVisible iframe, body.readableBeforeVisible object, body.readableBeforeVisible embed, body.readableBeforeVisible iframe { visibility: hidden !important; } html.readableBeforeVisible #readable_iframe, html > body.readableBeforeVisible #readable_iframe, body.readableBeforeVisible #readable_iframe, #readable_iframe { display: block !important; overflow: auto !important; visibility: visible !important; } </style><script src="chrome-extension://iooicodkiihhpojmmeghjclgihfjdjhj/js/__bookmarklet_to_inject.js" class="bookmarklet_launch"></script></body></html>